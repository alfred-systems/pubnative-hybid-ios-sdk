//
//  Copyright Â© 2018 PubNative. All rights reserved.
//
//  Permission is hereby granted, free of charge, to any person obtaining a copy
//  of this software and associated documentation files (the "Software"), to deal
//  in the Software without restriction, including without limitation the rights
//  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
//  copies of the Software, and to permit persons to whom the Software is
//  furnished to do so, subject to the following conditions:
//
//  The above copyright notice and this permission notice shall be included in
//  all copies or substantial portions of the Software.
//
//  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
//  THE SOFTWARE.
//

#import "PNLiteVASTPlayerInterstitialViewController.h"
#import "PNLiteVASTPlayerViewController.h"

@interface PNLiteVASTPlayerInterstitialViewController () <PNLiteVASTPlayerViewControllerDelegate>

@property (weak, nonatomic) IBOutlet UIView *playerContainer;
@property (nonatomic, strong) PNLiteVASTPlayerViewController *player;
@property (nonatomic, strong) HyBidInterstitialPresenter *presenter;
@property (nonatomic, strong) HyBidAd *adModel;

@end

@implementation PNLiteVASTPlayerInterstitialViewController

- (void)dealloc {
    [self.player stop];
    self.player = nil;
    self.presenter = nil;
    self.adModel = nil;
}

- (instancetype)init {
    NSBundle *currentBundle = [NSBundle bundleForClass:[self class]];
    self = [super initWithNibName:NSStringFromClass([self class]) bundle:currentBundle];
    self.view = [currentBundle loadNibNamed:NSStringFromClass([self class])
                                      owner:self
                                    options:nil][0];;
    return self;
}

- (BOOL)prefersStatusBarHidden {
    return YES;
}

- (void)viewDidLoad {
    [super viewDidLoad];
}

- (void)viewDidAppear:(BOOL)animated {
    [self.player play];
}

- (void)viewDidDisappear:(BOOL)animated {
    [self.player stop];
}

- (void)loadFullScreenPlayerWithPresenter:(HyBidInterstitialPresenter *)interstitialPresenter withAd:(HyBidAd *)ad {
    self.presenter = interstitialPresenter;
    self.adModel = ad;
    self.player = [[PNLiteVASTPlayerViewController alloc] initPlayerWithContentInfo:self.adModel.contentInfo isInterstital:YES];
    self.player.delegate = self;
    [self.player loadWithVastString:self.adModel.vast];
    
    //    VAST Verification Test Script
    /*
     NSString *vastString = self.adModel.vast;
     vastString = [vastString stringByReplacingOccurrencesOfString:@"</InLine></Ad></VAST>" withString:@"<Extensions> <Extension type=\"AdVerifications\"> <AdVerifications> <Verification vendor=\"company.com-omid\"> <JavaScriptResource apiFramework=\"omid\" browserOptional=\"true\"> <![CDATA[ https://company.com/omid.js ]]> </JavaScriptResource> <TrackingEvents> <Tracking event=\"verificationNotExecuted\"> <![CDATA[ https://company.com/pixel.jpg?error=[REASON] ]]> </Tracking> </TrackingEvents> <VerificationParameters> <![CDATA[ parameter1=value1&parameter2=value2&parameter3=value3 ]]> </VerificationParameters> </Verification> <Verification vendor=\"company.com-can\"> <JavaScriptResource apiFramework=\"omid\" browserOptional=\"true\"> <![CDATA[ https://company.com/can.js ]]> </JavaScriptResource> <TrackingEvents> <Tracking event=\"verificationNotExecuted\"> <![CDATA[ https://company.com/pixel.jpg?error=[REASON] ]]> </Tracking> </TrackingEvents> <VerificationParameters> <![CDATA[ parameter4=value4&parameter5=value5&parameter6=value6 ]]> </VerificationParameters> </Verification> </AdVerifications> </Extension> </Extensions> </InLine> </Ad> </VAST>"];
     [self.player loadWithVastString:vastString];
     */
    
    //    VAST Wrapper Test Script 1

//        [self.player loadWithVastString:@"<VAST version=\"3.0\"><Ad id=\"9873ad3c_4ea7e0a9f56a4baaa5fe9fcb80fea89a\"><Wrapper><AdSystem>BidSwitch</AdSystem><VASTAdTagURI><![CDATA[https://bid.g.doubleclick.net/dbm/vast?dbm_c=AKAmf-AAI0YODpOUYhJrR2B2ZbYqgeSvc_8eIUlLKNtHikutUoLCIo1KHZ_U9v_p1mQUV1RjD4UIwLPiEKjVEDfGtquDGfhX8Q&dbm_d=AKAmf-A2BpTTkdvnzjK1ohoiQIBdg5IWHB6M42w6V00MCDIpuCca0UXcmecNfMsysKRT7J3CF8b7gFFv8QTx1ZIQqv58L5eF5dedrMVBch1m8zzZPHemXJKm5I0SRQR0kmXHp71JctXUp34LOlPXLuIsg0VOgFehQ41uqqMi8UJJnXv5HKNO5xjkth1Yxe6gH-brtCkyZc_JX7QhpWT25G09AYSri2055N2SW14w_oQHr9Wfh30jjWI2Lac5wbvbgj3Urn64wlVi7gZr5HKkjHQ0J9El2a9bbZRir4RtiOUri_wqYrUjpe9Ey4I_tC4nSxYRF_k16KxYqXSrKnilstNg4mNmQ3OxMHiNqCiMCU8sZQkEyrvdFIeFR9bHA7jqxgzSeO8t7L0PcG4t9Frfde_GocztAXCLkNqjNRQcALH8wJuH8wyr_gFpQ6CqWIn3q-UEtjEf9g9tgmGJCnEBSqNu9mPnP6TWzIMEZH3iYYkymH2y5lXsaKyCAOANgrJ_z0iGawvOMFim517gdMNb5Qu9ECGP-HZcm4bmj9JWp62AGKB7ig3_SEkUMODJ6sEqle3v1vlfvW5nEOobfBs8_Qr_3Ot92PLecYkM36q5_dqiD--wjplLPBDEIdSrvsu3HttLJgOO9X1dVBKPdGrw0cxAPw40mI91zO4Di_380iSmqnZo8OFkt_yieE-UtIGCJKYHAywaEPlckpkcnbal5fkX7Lvx51Hgg9FeAh_apbKI5ZuHUF3LsObJsADUjWMdYnEfHjImRqCjKtNGHJnyxCIQvLb5kedsHkaLjKO30ubMPPsiDBF_HKYq_cNkX_3N5QmfGxgieE6jZaxT2KUxVGU-xFqgOA1ITWmBsDB1llt2hMW9_RHsquPuaA_X3wKGymYs7dV1KS9aboBLkDYpjqQt-MRxSq8_GFM51XYU_YgpaFuYUrif49NaoTImqmNbJdceuTGUv8M-w0HKYscBxy4fN8T6oZBI9ieW6uZMjnV4Dcf55CECQA0Gl4xk54I0rgk77EquebytmUg4Q8hTi6hdJr1yAnL_eAr6XC6cuFKubVtt_sB9ZiwVeGHhKfl4mCbd0a2hloR0lhBuDDYPQDKm2u68rP87YtEd2_-twz-as4AktI8J8SeF6IPiIO7XR65kBizuggTBx8Vc8Ks-ZP1zvxPAkShiZvSc7Yp9UQjE3w8P5u87T2m9WmyOCQB42BVXgChDIKZHvAnx706N3kjTFthZkHll9DsGAvkCuqklhhfqz9kd5X_NtO5qUuOeXnCGooJfJmHpIXKbzOslwC834f8PFbNTDfVKjte49Zi-UEjuoyUeBGWtK4ZBaHk66UdjyAdaOV7j-LHOCg1RJeukX3WTZgjXTYzTHjcFSA3mB5-tZ6yvWTTaB4tgckqafHq_GhW6rDg7UJEw-0S_StbRFeiGI26JLcKwlngE2SnUXcLMZu89TQ8f6GdXO0ZsQhkHsDtDRMPBeL7tRBFE91JmR1NV4iJDrK1Fqw-6iQM4ND4Oarn4HPB4uqDqPMvjwr71jQe0494kXTScgEF6joEPMZxTz73fSVWVzPSAKZkIsrVZ8ZZDTKH4OD4b2X5Btmz6eWr4pRKHuoDMrxo31S46Jgb1PGARyHEML8tPs54Ada5lSDUzJN3uw2-IqdJDSCniXLi5H19sY00nY6SENd0w0IGcdkkMOTW0Yn3_1nfqbZzXUo50GXnXM0sMHAo7E_imgdrmDXunPMxPvHKo00R2RG0VwSDJrgt813mBYjf5plhNIkXByI0E8P5BTe63CHUqZiKGDJf6Sw5L6ZenMTsO7xERmuOrQOHKdKYD90G4egDpsjveZdeOz-kutT3mpE2RNpxE41LGvNiPQdTIpZlEAIuISkyIMWkFlZ6hkwNazEX-FKSiRzof1wigO0wEKl2ic2aWaEIk1g2Eylwsibb2v70k4D9jJBuTl5D33Fk7zACbV0RbsfOOVFy2d9kLQlW5fP5OoEyMaEIhYXCdzK7ZRKYii1Yf1SgO2cmAOfnlxnAxHV1FUUD-seMi2T5AcLjQEzjvterXWtJuo35ce9v-pLKRY41zv304jMnIEGDiJzLJgPkrlZvynkjhWwky91q_3dQlBezmRxrVJXu42VdW_RqNbkZE2xkdHVN00OuIpAgiHChnuvASnzTC_UrsXBoXgYlGRoRAnD9dgRnvn5uEy2tr7D_hm3PLYWQrkgkg5kspEnosgF8NGZSfWIpVcmBt7v30BuL0mNJ2YVot02_r6NCvtjMDp46YXHRz78V0GaaTWGe-SjNl8y08lAAKMb9e6KkhXAo6Q7Dta2YFi_bHxSDnNqKCL4FebDQ-wioLTCVmTSW2NM_WezlQnc4nwxrAH3HSIm4OUKMD3mS-sO_LBcIhpcg571n9Wo1BkGWIzyO8wRQl8ipKUkLFIr7HlELTyzdMq9tI14Mg6vq9Cf-ZWU07_gzmBN8kUVya1JAh8lMeLvJfPkR-yAYx0MfdUYD8abh9fTmV6apyC6iIts7TsprftphGa45vRlyuFI5rUj6WoYmyzWD7Z-6RodL9Y4PHDoE51HS8JMUZd-rXwyURiwoXYKNegUV5p-t85AOAzIRUrTPBxmZQ9T7_k8R4_JfZSTVsHBQfzVWZXzq9fJkgwj8nwC6BZmmey4o7I2_rRAKW3i4MOb6UdM7PA7Ag7iWAL7lwgsOznaAZ-o6l55p2BbI4LXPTCGFOEgDlOV5O6n_1hiur6Q63x5MZpOjR84zSZF-W_DvyUsUiquQP6iIKmlcbpcqkr2VDQdje0Z8ijIdsEyyw9OJgoV_ZTX85sbJWR9ot1Xpvhpmpv5l0i2sv1r9kqtDHKKOxmrszr27uePKB0taxe15eL37ot0Q5Ymbpyh-F03nf0lWN_QtMWOLCkezlVoM62IKS0HpLlsPWvzsslIVysDdRxMfnLFmySj4PsI0X0wBt3hVhA8XclPGCrNso6P2jtjAqSi7NYumEDT9L1RKKmKTldwivHJhArr-EqFO4XgTJpjmp8Lnwo58TplHVSQoyEvtnUPRtNAd2YgJZhdOMTjIVnek8irONMf0lDj7MAN3ODNCIPDu-fwM2kdWoMh_JBLO78tbWnszw2umgcGcDyeF0oyQIPaVhuZrV-58f5VVAxnf3i8zfuxineMx4Q4A44mMSPSxzcDMqooA0KDhnfqxtxXlITsulvcz8pq6dmQ9kuLsPI5Ca73KzPhA3w00BCqQlR3mr-YLWMyyNQTail3iNx6js4ofgBgtkmzbxA-chhdLUi8IBk2vVHuhCnXOo8wsgdjGDiqekumDgiIINOgY&cid=CAASUeRoQbxX64TKfnHwDk7ZDDU_2aDSZn-V6sNW7dwaFPo5ZdONdl21zwbjRfTWihOuW2ozA2JhLGoRTmSagwFxtOzVEJcHKHvmauFKkeRuXj5wQw]]></VASTAdTagURI><Error><![CDATA[https://gce-sc.bidswitch.net/vast_error/dNlyFIe1Aqzn3dpso3i3C_MNZvSC1c4T2-X7dQZFcM-PUey0P6gzOs6utyHdhTpLvvqztui2rn-U1D0xx4beIBVrkRoXMZNjfd8KB7dJX-HwyqaTbBEchkTwtrfL-_zamDICyuNta6mKb6YiJ6AeZjjeu63zQXKz3FYIxVNcl0Ib3ml3zCvo9idJku4C7sZuEOEo3YCU4bUh06Ita1IL4nDjGqzq8pGXLc9H953IenK_fPt_8WwYVyg3sNGrSd1NHlggFo2ELoz9k1az6D6tN6b1YEeviOTf8kRdxBZXdop1d9GXDBFlIZ8oElRXN0kbjdDgb4RdJFlVbseBxeJo9cZeU4HHqyZJEvHMi-qp2T1gu0fmjUHcqVj7KBinZS3an2LnZgpjpk6IN2oi_uCPpRy2GckQrWFBQqcBLhwXjYeIF3izlf3EGKIR6AV0LCR9SJ2XCdtecGRbDNW4vSmjbTi8AcOlLcDdiLdQlWq5sKr65kYtm16gIafhZiL3czWtde1orRF6Ft96OAjXow0SVNJLkmCb8J2YSMxDh0wij_8qXZMOxYGlXPkiUQEeg5bgH06cugZ3ruuhmhgqxIb3w2923KN3dhewiZXcE3vycW8kxCkx8oBMxlPuXhoQ7uNbkvuar2rEuNKVxy_6NihsyFY3i9TUvPp-_pK3Q8YoVbYD3nv9J01402_w9vm4kkSSLLKt68BA7dUA_2hnizz141k-2X10aV2ijEE5NsWp-Kx0G284819Bm4wnu3Sik8MDMsFuYWg1xe5dctzT-qveg8VdrXkYTieVUsp4YkHGpSfyiWt7ee1NQkPLdzrqvoBrDnKjQciggDzpxH2IpYNNYUlDmKnPQCNbrAegITqEdV7jDD5rY-RWsNmIKfkguWA3LLW2q6Zc3EIqRRxrP7c9_cPD6Y1ILZIqVO7E5fBeXyk/]]></Error><Impression><![CDATA[https://gce-sc.bidswitch.net/imp/${AUCTION_PRICE}/BSWhttps_A_B_Badx.g.doubleclick.net_Bpagead_Badview_Cai_RCiLXxTnG6XtmDBdW2jAaWh6DgCKDx4ZNc19zljboLqPijje4ZEAEgg__3mH2DJxryJkKToD6ABrq7oygLIAQWoAwHIAxOYBACqBOUBT9AwC1QDLbEwsNKLVm21hxjVah6-hQ8WgxXQLjbHDc2mdTynYX4TfPpPsll0etxn53BQIOMPfJPSe4YuvwgwE7fc4iTYnIFIYS-QMSU4ppghbhOs__yj-eVi1By9Qgj3qmaFOwgaL5TYol7zg__QaFE__d6qZh1IIM0IRBWN-AqC2QI4fHUk__tK6ZNHUAovZIX0quxpcw__9sKA9qMSJyOWMbgVqk1kuLrkJ5D5tPLRAz2C9BFip6__QFEhadYu__Z1AoS0jOPq__qhf6Flpy-ZTdI23m6nEjsEdPcesWFaN0r5SdY2evfXw8AE8uGbnN8C4AQDiAXP5uHpI5IFBggdEAQYAZIFBggdEAEYAZIFBggeEAEYAZAGAaAGTtgGBIAHutGXtQGYBwSoB47OG6gH1ckbqAeT2BuoB7oGqAfw2RuoB__LZG6gH7NUbqAemvhuoB-zVG9gHAPIHCRDSiCwY2Kf7aqAIpK2mBLAIAtIIBwiAYRABGB__yCBhiaWRkZXItcHVibmF0aXZlXzE1NjA1MzGACgTICwGwE8r95wjIE4KhtAjQEwDYEwqCFB8aHTkwNDM5MTIxMC5za3lyYXltb2JpbGVhcHAuY29tiBQD2BQB_Jsigh_R0NuR3nj10bA_Jcmd_RChdjYS1wdWItNzM1MDg5NzEzODA5OTk1OBAAGAE_Jpr_R38_A_I_WAUCTION__PRICE_X_Jcid_RCAASUeRoQbxX64TKfnHwDk7ZDDU__2aDSZn-V6sNW7dwaFPo5ZdONdl21zwbjRfTWihOuW2ozA2JhLGoRTmSagwFxtOzVEJcHKHvmauFKkeRuXj5wQw_Jtpd_RAGWhJmtvy79ei1v1UurqSzSWUqomjc8jbKmsjyCFurMd57ak4g/dNlyFIe1Aqzn3dpso3i3C_MNZvSC1c4T2-X7dQZFcM-PUey0P6gzOs6utyHdhTpLvvqztui2rn-U1D0xx4beIBVrkRoXMZNjfd8KB7dJX-HwyqaTbBEchkTwtrfL-_zamDICyuNta6mKb6YiJ6AeZjjeu63zQXKz3FYIxVNcl0Ib3ml3zCvo9idJku4C7sZuEOEo3YCU4bUh06Ita1IL4nDjGqzq8pGXLc9H953IenK_fPt_8WwYVyg3sNGrSd1NHlggFo2ELoz9k1az6D6tN6b1YEeviOTf8kRdxBZXdop1d9GXDBFlIZ8oElRXN0kbjdDgb4RdJFlVbseBxeJo9cZeU4HHqyZJEvHMi-qp2T1gu0fmjUHcqVj7KBinZS3an2LnZgpjpk6IN2oi_uCPpRy2GckQrWFBQqcBLhwXjYeIF3izlf3EGKIR6AV0LCR9SJ2XCdtecGRbDNW4vSmjbTi8AcOlLcDdiLdQlWq5sKr65kYtm16gIafhZiL3czWtde1orRF6Ft96OAjXow0SVNJLkmCb8J2YSMxDh0wij_8qXZMOxYGlXPkiUQEeg5bgH06cugZ3ruuhmhgqxIb3w2923KN3dhewiZXcE3vycW8kxCkx8oBMxlPuXhoQ7uNbkvuar2rEuNKVxy_6NihsyFY3i9TUvPp-_pK3Q8YoVbYD3nv9J01402_w9vm4kkSSLLKt68BA7dUA_2hnizz141k-2X10aV2ijEE5NsWp-Kx0G284819Bm4wnu3Sik8MDMsFuYWg1xe5dctzT-qveg8VdrXkYTieVUsp4YkHGpSfyiWt7ee1NQkPLdzrqvoBrDnKjQciggDzpxH2IpYNNYUlDmKnPQCNbrAegITqEdV7jDD5rY-RWsNmIKfkguWA3LLW2q6Zc3EIqRRxrP7c9_cPD6Y1ILZIqVO7E5fBeXyk/]]></Impression><Creatives></Creatives></Wrapper></Ad></VAST>"];
    
    //    VAST Wrapper Test Script 2
    
//    [self.player loadWithVastString:@"<VAST version=\"3.0\"><Ad id=\"3b5c0dc1_abf95570ae0d4b33a69ad29882af3cae\"><Wrapper><AdSystem>BidSwitch</AdSystem><VASTAdTagURI><![CDATA[https://bid.g.doubleclick.net/dbm/vast?dbm_c=AKAmf-CPae9B9J-6s8a5990l4DmtKIR1AcEa9X4Hndte4SJ-7PnNaaajF0rarHz0xPXR3foD5eab9ebYiIBHNGC4UkWF-9G_Lw&dbm_d=AKAmf-DVk4dPAjpNsoGYpcry-1IRmH8dhtVdPbibB2ZQKTD6AiaVSqpOVT0IGye10a-MbGzF0XXEYvz9IFYOcWHhLCvDizfjFuCsXE6SZyEhThm0MoMcnAqLk1dGDzs-QFx_vo_xKe5cDxgN0gMtnS2LYoQLVTzrpVhunmjAIeVSA4X7XH6MJqHacIdplFkNpLhlvEglyAdDot3jGLxsnnDORce5G1DSnWHPs-nFOp6GZ_rEf5PKK5LhU6DA2E9HzGAeW-H_B7P7-_7PHw4PcB4yCUfCAZGRxi3o9zXun3w7i9gI-u7nwqOPKap8gXoZ4aU7MvPtP7IbAMaQ1nI9WP-VnTQuKl7OL_EDSE_hoM3kkH5I-g1IOOu_MMDVAX3niOFA18nrGNYABB9rllYg6ke0UnwtbhF4c0zDVmBIb_bn4Tx3gUbm98iQleoFT-crvUwxUd80YSYGGF3KuY-l_4AjArOKOVRDna3JRm7CLdcP-9-D-88W__r9zr__63SkiNw30ChR9f4U4oAZ4FDm65Fj_dD6C-l7ku04g5FRsaP2VVB7Hw9PJHw4baluiO3wrvDWpMN4-8Rq-FPgX16DxoseA3mAR_jL2hF5ttKKKK7uSbY8Sep93glo5kdY_x7nItqx74aTkVYlyQ8k_iuq2i8sgSIb6zBiWWzMClLqbEcQLllnp4J9CgeTS6DS7ZmszzE75yphkmihuThqfEc8NBdKc9DSgaMb1zzH6nDUBkwLQWGcPGGRm4HCYm669vzFI9HDStkvxNjnc7kHEleMg2RoYi_NmfWvHr3cBK4XCk1jUUMZWErUFCHoa1J9jorwyvtYFXK-iOfyOrxWrx2SZX3GBm27A_dfL33fPOFXxGrhsQV8yN3goUq1_QKlt96TAWD7kRwNSyIYgMlO1QdOTeqBjSHVV9VhWDhQLoObP2iV-a1UxLyTj41K-oFLT0sOQ98_3zisl1xpUXsTK8mKpA4togX9kUw5aD8ZiWzABN1fuwes_-xAcXaKBeFS9RN4sqZVBJhPwtSBaBTZIkvJ0DBCI8V_MZoerheTTtQ8wL4uaxU67tnr5UsZykxzsFGGW8UWqFCYzpWEBET5LeEkoGQVesABqpHLda659r79kcv7QRJb6aKxpMy-m7EhOmDCVDOMcAzdL7PmXWSnKThXJd8uAgM2gUYwaxNy63EDVm7UdZ0hKNa5f6A_SGsr3GGXR6R15O8gpeRyFpoOOsw98LOsVQzMhwQoUd07F1xNlvkPUkYn5Q30A4RLMXbSahTiTLC3fsDlhvY_S2WL9prMxh24LOrSVpARAlHBcyQnwmemaX-_tk7Nb5N1qdmdtuX1Dqxo3bP9aMxjV9w-Pj_nNGdMBQwaSEdwcxcYeNWJiYtb800bzZeY6FznSYNOuxR66h_udwIR-G1BkBtAnGZ29qC-TYXHnZQqO5NRYxQZ0leewArN4nH_Is72Cb72Md9vFoXV3DLllhuxHNT225JV59g2hxdqIbZN3szvzntzEiB8DFDpO0St8zIlGTP1UQJtAKa5jMPiFv21ERvly7LAccXCe1s6qM59WTS4qAsCETCqCBQ2u0Q1411Pg6yY6ewqH0zKVWP7hsMycPI4sAaTyHLZbG-HehVq7dUEpa5FBopZlnVVQcsNG0zCWeJ29Oftsrs5Rq5GyI9_FdseCvPuPtgekF8km17Y1ZF15RTCSGl4MJbEbi-8VIv13dzrPe0qeWdChS6KTZgE3N4pl7f02KMdlF_KWUg7TwsU4gf1VKgJ9jc0k6sezmmjTMMiSk0XHESLjpGeU4fec-M_D-VzMECtE-5sK2-XbR-cFUbPoWpDKIpFa7gmfZMCi4hnPusd2gPfulxXLErGMZOFkZJd-3waQAMOJpVm1FCPvaLbtt3r6q6IUPwqFu-n1Kmr817hvrzElM9-9Il0EAVJphTseRZyF5-0JZkqc6fQuleZvkK2MR_fF3mti_ahTlN_j65M4QJF1uzMigjHpJ3b7p4xUx9XHh5KmYseccx4h2OP4F4YWgiIarxJ6jp4yvOsg0hWmJmZoJDXQ6aiumQqD1xPdaJMhIp7lzQGeO_8K7GTVgtxavTOoC2zCL-OFBMG17T_XBuotB-u5YAveTVe1iqt5lygqZAyLxmNnWSNma_G1CFxyrjLHh7QoSBzrXLgzj_PzMfBr-4ulTFKJeYPgU0TqvQgiA_1mWq_NeCYSMmthnu6ev3qFRqu-iFjGt9AEabEpG9fhMCQSsriESI4H2LcnYgPH3oNCJeRQxy-CqI30l717PXDtvpaYp3fi9pGfs9LzXvwme-txLIiAPDXDDn02edVhY8j-ZdciWEPQeLtKITG7Lv5nGmKZvJImAqqS4hwSs5hgo7qHABJtuxvHvbF9MxQ2Re0oWo9fi-193OBI9Je-s8mR9qbFbYnnZ3j5bdw08HjOeZ--9e8GXyHmGkl524cJdglvr9Bt2dw2vINm0iyX1qQUuZA-tmutiB39GueSC41L581ZaxKDgiKd4BB0V021al_Jk75ZRwmbOHdOUwyYvwdHFva3bM6bjowiMxUrJ3dDJox6HFumcFTLsSggvG6auZMikKcW5e1qQTlQEqeeGGS2W5lncz94gD9xPzAgvTxqaj8rI88ldnBhPKwkZNjl6568UCLsrI84vD79T1uGJ-IoA-x0mHBY3yBui4K2OxrSklcP9ufHRTRk5yfRsM5XxpybndHmGVowWTG_uDmbjL8BE3s2u95xfMTEtYGLjqZ9uRFNikYZ1Cgf0pcYcSG9aPpyk4Vnk976tt7Dnuiu47kpOFSAJnbaYJm4FpalhNOpEcWOKBo2MMOqRHDETw1kJT1bQzRQECenXL11LcZMf7E3uAk3rkYduBPuoEJKuUFBsnOifbf_IkWmNYrT4Ze0OxEd1r2wc3JLGOy4cXUZ9EGXaRsryaFtS6kMafRer7ukkl2fMCMbha-DYZ9cuPzWzPRq5YtImmWrNXcN-EO8pP2-kM3rZg_89_QAjsRSh2h_8GRTV2qL5_nAhbDkT8FrE93TdJ3jEOjAffVuS6gkmsQ2Z3aEuHLP2yq9fGs6KFTk8xIn3j8iXUc7vXpWjLr_Kw32NwH1oQPiin4sWzLYxNZbeMJEjXlKVv7BmFzFY_AbRyoDig0VIjU72Lr59LPyr5MJLQJ-9N1_N3MjFW3vv51zEzbmBtz1Ger_XT-K6MvSYng82FKhFzpoVRjULwiJnWN05uGzjo5jGtFB0eqtTuvXGTjeYU&cid=CAASUeRoTe02AIUasKmpiKvGadVfYx4vBT6o-RjPaPlIi4WoKer_4gupexptwZsrBkHVXQiGmlQI_-uU0aYtEh9UK1TydKuA1_WqTUmw8hxicAINew]]></VASTAdTagURI><Error><![CDATA[https://gce-sc.bidswitch.net/vast_error/fmtHevJutGxVinZ72gZf-r4E8V5_AhJxcLWkoM1r9PhQc6_CiLwxqkabBWrzhetINac2mWabguxs2HZYyGGUuhqaXX_uFls0IwPP3nj2K6Z0sBVTn1eyBx2w9_MZl9TsuBJKCqCQ01P7aA9nNg0ct2EHEDHlo4fqnk2AcNo1va9_QMqJqFVKiAEvNHGJ7CeLmXt_o6-QneiXC3CBbigmyQWhfzF2qNX2VKEiYYWw4lyC5aIMuC6mEeEnW-9-3jRtBdFGurnVoQKtux5rGlQha9Wd0C-X3rN-f2VYlmfLE4qe-ovSSLiWP0ZcxToUgJs4F_bfyfAB3CJ7H8ql9D3Rlp9AWwRH5QBlwVmAgGhsjoT4X6DpUoubL7joP0BKGtyUtYdyA9UvNDOV_3o-yuZ_MvNqlGE8bKlmuIi531Kx7DK4wohjA1MaFbjEsj849wzQp6_hZ6MA-wN1RSIgaMAZq0aRFm4HgspsArkiqQSB8KXr8za0iz8rcFK_2_xWsrydsX3nnpGi4SBVgVLUZFLQwoD3BU2MU6KBwCyJrjw-nO7lG_q2DAt0JhUWx2c9lHOhiF7GgHHmxYLjtnysm1go4q2uzdNoB_Tj_inbAR0zKsGICUQbVDrPZDSIPYWZy7IL_M3L8UKmRoIn-nx0T6jTqpMUlaX7LfRst6Nr5e49vSF0DZY_loDrhKqE2UPgKzmQEG1x9DO5Z63T3ySkQzXtnqR9dnMUgl2c0XfR2U-uQK2X4PYPqwQ0CjwSE9326ax1Y0r1OupPvCGk6lnwmpm6oLZZnCb3W-nYp52jHD0l0Acoj_vs9kpPXqr0psYFIgnMOSKyvZKbfFn6dQqgtnPy-7HyOg4rCaUtjlEzJ8Sk-rKJyWeOvUik7k31IqG9wKgwARECWYxh7b3dhsf2I6_ROlK07TQFFYQq_TYDMOiGyHFQg14-AstTLjh7eNlcwQ3ySEsTb60/]]></Error><Impression><![CDATA[https://gce-sc.bidswitch.net/imp/${AUCTION_PRICE}/BSWhttps_A_B_Badx.g.doubleclick.net_Bpagead_Badview_Cai_RCvVXiGHG6XsE21qeHB5DjtLACvpjElFzIwp2cmwu1z-e08BkQASCD__eYfYMnOw4vEpPwPoAHb7____gAsgBBagDAcgDE5gEAKoE3AFP0Bfk1cf9rEBu60a__Z5U8vbsOUfjw3VmETJ-c1ZuiNhA8x62Bi__bc6hRAGbGTYOW4o682kF47wv-JcQ2SqxWzCtSrrLvMzo6m7NnSPmK-__T0OyQsvqwGUuZ4QP2__3w1SQkMqwKGVPbmhsHK4y5RDkHlRmWAT374VN552hie65Ixr0q__M2UUaWbhw-4zQ4oJ7SSjNOtmRmhiREe-a6SQNX0iJSzajJTQEB__JfzZS__Lko-TFx4CQk2P0MV4kEDB8K65sejpEUzHvZ-G2PGsmtIxItnWEkswJTcVfmeNwATJ3u717gLgBAOIBYby9uQjkgUECBsYDJIFBggdEAQYAZIFBggdEAEYAZIFBggeEAEYAZAGAaAGTtgGAoAHjZCAnwGYBwSoB47OG6gH1ckbqAeT2BuoB7oGqAfw2RuoB__LZG6gH7NUbqAemvhuoB-zVG9gHAPIHCRCmvyAYiOelbqAI-aGmBLAIAtIIBwiAYRABGB__yCBhiaWRkZXItcHVibmF0aXZlXzE2MjQ0OTOACgTICwGwE533vwjIE9q-sQjQEwDYEwqCFB8aHTQ4NjE1NDgwOC5za3lyYXltb2JpbGVhcHAuY29tiBQB2BQB_Jsigh_RtqpObdA8akM_Jcmd_RChdjYS1wdWItNzM1MDg5NzEzODA5OTk1OBAAGAE_Jpr_R38_A_I_WAUCTION__PRICE_X_Jcid_RCAASUeRoTe02AIUasKmpiKvGadVfYx4vBT6o-RjPaPlIi4WoKer__4gupexptwZsrBkHVXQiGmlQI__-uU0aYtEh9UK1TydKuA1__WqTUmw8hxicAINew_Jtpd_RAGWhJmtYYTEoarB3b9Blf-8qzYoNzSBFuNR5ECO-RmiGE1rwyA/fmtHevJutGxVinZ72gZf-r4E8V5_AhJxcLWkoM1r9PhQc6_CiLwxqkabBWrzhetINac2mWabguxs2HZYyGGUuhqaXX_uFls0IwPP3nj2K6Z0sBVTn1eyBx2w9_MZl9TsuBJKCqCQ01P7aA9nNg0ct2EHEDHlo4fqnk2AcNo1va9_QMqJqFVKiAEvNHGJ7CeLmXt_o6-QneiXC3CBbigmyQWhfzF2qNX2VKEiYYWw4lyC5aIMuC6mEeEnW-9-3jRtBdFGurnVoQKtux5rGlQha9Wd0C-X3rN-f2VYlmfLE4qe-ovSSLiWP0ZcxToUgJs4F_bfyfAB3CJ7H8ql9D3Rlp9AWwRH5QBlwVmAgGhsjoT4X6DpUoubL7joP0BKGtyUtYdyA9UvNDOV_3o-yuZ_MvNqlGE8bKlmuIi531Kx7DK4wohjA1MaFbjEsj849wzQp6_hZ6MA-wN1RSIgaMAZq0aRFm4HgspsArkiqQSB8KXr8za0iz8rcFK_2_xWsrydsX3nnpGi4SBVgVLUZFLQwoD3BU2MU6KBwCyJrjw-nO7lG_q2DAt0JhUWx2c9lHOhiF7GgHHmxYLjtnysm1go4q2uzdNoB_Tj_inbAR0zKsGICUQbVDrPZDSIPYWZy7IL_M3L8UKmRoIn-nx0T6jTqpMUlaX7LfRst6Nr5e49vSF0DZY_loDrhKqE2UPgKzmQEG1x9DO5Z63T3ySkQzXtnqR9dnMUgl2c0XfR2U-uQK2X4PYPqwQ0CjwSE9326ax1Y0r1OupPvCGk6lnwmpm6oLZZnCb3W-nYp52jHD0l0Acoj_vs9kpPXqr0psYFIgnMOSKyvZKbfFn6dQqgtnPy-7HyOg4rCaUtjlEzJ8Sk-rKJyWeOvUik7k31IqG9wKgwARECWYxh7b3dhsf2I6_ROlK07TQFFYQq_TYDMOiGyHFQg14-AstTLjh7eNlcwQ3ySEsTb60/]]></Impression><Creatives></Creatives></Wrapper></Ad></VAST>"];
}

#pragma mark PNLiteVASTPlayerViewControllerDelegate

- (void)vastPlayerDidFinishLoading:(PNLiteVASTPlayerViewController *)vastPlayer {
    self.player = vastPlayer;
    self.player.view.frame = self.playerContainer.bounds;
    [self.playerContainer addSubview:self.player.view];
    [self.presenter.delegate interstitialPresenterDidLoad:self.presenter];
}

- (void)vastPlayer:(PNLiteVASTPlayerViewController *)vastPlayer didFailLoadingWithError:(NSError *)error {
    [self.presenter.delegate interstitialPresenter:self.presenter didFailWithError:error];
}

- (void)vastPlayerDidStartPlaying:(PNLiteVASTPlayerViewController *)vastPlayer {
    [self.presenter.delegate interstitialPresenterDidShow:self.presenter];
}

- (void)vastPlayerDidPause:(PNLiteVASTPlayerViewController *)vastPlayer {
    
}

- (void)vastPlayerDidComplete:(PNLiteVASTPlayerViewController *)vastPlayer {
    
}

- (void)vastPlayerDidOpenOffer:(PNLiteVASTPlayerViewController *)vastPlayer {
    [self.presenter.delegate interstitialPresenterDidClick:self.presenter];
}

- (void)vastPlayerDidClose:(PNLiteVASTPlayerViewController *)vastPlayer {
    [self.presenter hide];
    [self.presenter.delegate interstitialPresenterDidDismiss:self.presenter];
}

@end
